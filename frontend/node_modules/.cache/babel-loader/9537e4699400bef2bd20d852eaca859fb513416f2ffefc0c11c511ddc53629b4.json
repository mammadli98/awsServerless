{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';// Import useHistory hook\nimport'./Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[message,setMessage]=useState('');const history=useHistory();// Initialize useHistory hook\nconst handleSubmit=async e=>{e.preventDefault();try{// You can replace this with your API endpoint\nconst authToken=\"\".concat(email,\"|\").concat(password);const authResponse=await axios.post('https://9xna35s7vi.execute-api.eu-central-1.amazonaws.com/dev/user/getAuth',{\"authorizationToken\":authToken});const response=await axios.post('https://9xna35s7vi.execute-api.eu-central-1.amazonaws.com/dev/user/readitem',{\"IDs\":[authResponse.data.ID]// eslint-disable-line no-loss-of-precision\n},{headers:{'Authorization':authToken}});setMessage('Login successful!');console.log(response.data);// Optional: Log response from server\n// Set cookies for email and password\ndocument.cookie=\"email=\".concat(email,\"; path=/\");document.cookie=\"password=\".concat(password,\"; path=/\");// Redirect to user page after successful login\nhistory.push('/user');}catch(error){setMessage('Login failed. Please try again.');console.error('Error:',error);// Log any errors\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"Login\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message})]});}export default Login;","map":{"version":3,"names":["React","useState","axios","useHistory","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","message","setMessage","history","handleSubmit","e","preventDefault","authToken","concat","authResponse","post","response","data","ID","headers","console","log","document","cookie","push","error","className","children","onSubmit","type","value","onChange","target","required"],"sources":["/home/mammadli98/Documents/ExamsDocuments/WS2324/DSG AWS/project-demo/src/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom'; // Import useHistory hook\nimport './Login.css';\n\nfunction Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [message, setMessage] = useState('');\n  const history = useHistory(); // Initialize useHistory hook\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      // You can replace this with your API endpoint\n      const authToken = `${email}|${password}`;\n\n      const authResponse = await axios.post(\n        'https://9xna35s7vi.execute-api.eu-central-1.amazonaws.com/dev/user/getAuth',\n        {\n            \"authorizationToken\": authToken \n        }\n      );\n\n      const response = await axios.post(\n        'https://9xna35s7vi.execute-api.eu-central-1.amazonaws.com/dev/user/readitem',\n        {\n            \"IDs\": [authResponse.data.ID] // eslint-disable-line no-loss-of-precision\n        },\n        {\n            headers: {\n                'Authorization': authToken\n            }\n        }\n      );\n      setMessage('Login successful!');\n      console.log(response.data); // Optional: Log response from server\n\n      // Set cookies for email and password\n      document.cookie = `email=${email}; path=/`;\n      document.cookie = `password=${password}; path=/`;\n\n      // Redirect to user page after successful login\n      history.push('/user');\n    } catch (error) {\n      setMessage('Login failed. Please try again.');\n      console.error('Error:', error); // Log any errors\n    }\n  };\n\n  return (\n    <div className=\"Login\">\n      <h1>Login</h1>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label>Email:</label>\n          <input\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Password:</label>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n          />\n        </div>\n        <button type=\"submit\">Login</button>\n      </form>\n      {message && <p className=\"message\">{message}</p>}\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}